<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="highfive.nowness.repository.BoardRepository">
    <select id="loadRecentContentsAndReplies" parameterType="long" resultType="java.util.HashMap">
        (SELECT 'contents' AS type,
                c.id AS contentsId,
                c.contents AS contents,
                c.created_datetime AS datetime
         FROM Contents c
         WHERE c.user_id = #{user_id} ORDER BY c.created_datetime DESC LIMIT 0, 5)
        UNION ALL
        (SELECT 'replies' AS type,
                r.contents_id AS contentsId,
                r.reply AS contents,
                r.created_datetime AS datetime
         FROM Replies r
         WHERE r.user_id = #{user_id} ORDER BY r.created_datetime DESC LIMIT 0, 5);
    </select>
</mapper>
